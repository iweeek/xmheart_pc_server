<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title></title>
<link rel="stylesheet" href="../css/reset.css">
<link rel="stylesheet" href="../css/editor.css">
<script type="text/javascript" charset="utf-8" src="../ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="../ueditor/editor_api.js">
	
</script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="../ueditor/zh-cn.js"></script>
<!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="../js/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <div class="editor-container">
        <form id="myform" action="" method="post" runat="server">
            <p class="subtit">文章标题</p>
            <div class="input-wrapper">
                <select class="select-title select-title-first" name="">
                    <option value="0">请选择</option>
                    <option value="一级类目1">一级类目1</option>
                    <option value="一级类目2">一级类目2</option>
                    <option value="一级类目3">一级类目3</option>
                </select> <select class="select-title select-title-second" name="">
                    <option value="0">请选择</option>
                    <option value="二级类目1">二级类目1</option>
                    <option value="二级类目2">二级类目2</option>
                    <option value="二级类目3">二级类目3</option>
                </select> <input type="text" class="article-title" value="">
            </div>
            <p class="subtit">文章内容</p>
            <textarea id="container" name="container"
                style="width: 1024px; height: 300px; margin: 0 auto;"></textarea>
            <p class="subtit">文章标签</p>
            <div class="tag-wrapper">
                <input type="text" class="tag-input" value=""> <span>（最多添加5个标签，多个标签之间用“,”分隔）</span>
            </div>
            <p class="subtit">文章摘要</p>
            <div class="digest-wrapper" id='wordCount'>
                <textarea name="name" rows="8" cols="80"></textarea>
                <span class="wordwrap"><var class="word">200</var>/200</span>
            </div>
            <div class="btn-group">
                <input id="publish" type="button" name="" value="发表文章"> <input id="reset"
                    type="reset" name="" value="舍弃">
            </div>
        </form>
    </div>
</body>
<script type="text/javascript" src="../ueditor/jquery.min.js"></script>
<script type="text/javascript">
	var ue = UE.getEditor('container');
	//对编辑器的操作最好在编辑器ready之后再做
	ue.ready(function() {
		//设置编辑器的内容
		ue.setContent('');
		//获取html内容，返回: <p>hello</p>
		var html = ue.getContent();
		//获取纯文本内容，返回: hello
		var txt = ue.getContentTxt();
	});

	$(function() {
		// 标题二级选项的出现
		$('.select-title-first').change(function() {
			if ($(this).val() !== 0) {
				$('.select-title-second').show()
			}
		})
		// 摘要的字数
		var wordCount = $("#wordCount"), digest = wordCount.find("textArea"), word = wordCount
				.find(".word");
		statInputNum(digest, word);

		function statInputNum(digest, numItem) {
			var max = numItem.text(), curLength;

			digest[0].setAttribute("maxlength", max);
			curLength = digest.val().length;
			numItem.text(max - curLength);
			digest.on('input propertychange', function() {
				numItem.text(max - $(this).val().length);
			});
		}

		var category1 = $('.select-title-first'), category2 = $('.select-title-second'), title = $('.article-title'), tags = $('.tag-input'), contentHtml, contentText;
		// 需要发布的内容
		$('#publish').on(
				'click',
				function() {
					console.log('类目：', category1.find('option:selected').val(),
							category2.find('option:selected').val());
					console.log('标题：', title.val());
					console.log('标签：', tags.val());
					console.log('摘要：', digest.val());

					// 编辑器内容
					contentHtml = ue.getContent();
					console.log('获取html内容:', contentHtml);
				});

		// 舍弃
		$('#reset').on('click', function() {
			ue.setContent('');
			$('.select-title-second').hide()
		});

		$(function() {
			// 标题二级选项的出现
			$('.select-title-first').change(function() {
				if ($(this).val() !== 0) {
					$('.select-title-second').show()
				}
			})
			// 摘要的字数
			var wordCount = $("#wordCount"), textArea = wordCount
					.find("textArea"), word = wordCount.find(".word");
			statInputNum(textArea, word);
		});
	})
</script>
</html>